{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/sahilkamboj/Desktop/Coding/Github/Web_Dev/mycollage2/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/sahilkamboj/Desktop/Coding/Github/Web_Dev/mycollage2/frontend/pages/components/Image.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useRef } from \"react\";\nimport { Fragment } from \"react\";\nimport Draggable from \"react-draggable\";\nimport \"../../styles/Image.module.scss\";\n\nvar Image = function Image(_ref) {\n  _s();\n\n  var uuid = _ref.uuid,\n      url = _ref.url,\n      xPos = _ref.xPos,\n      yPos = _ref.yPos,\n      rot = _ref.rot,\n      width = _ref.width,\n      height = _ref.height;\n  var imgRef = useRef(undefined);\n  var valueRef = useRef({});\n\n  if (valueRef !== undefined) {\n    valueRef.current.curXPos = xPos;\n    valueRef.current.curYPos = yPos;\n    valueRef.current.curRot = rot;\n    valueRef.current.curWidth = width;\n    valueRef.current.curHeight = height;\n  }\n\n  var getData = function getData(imgRef) {\n    if (imgRef.current !== undefined) {\n      console.log(imgRef.current.getBoundingClientRect());\n      console.log(screen.width, screen.height);\n      var xPct = 100 * imgRef.current.getBoundingClientRect().left / screen.width;\n      var yPct = 100 * imgRef.current.getBoundingClientRect().top / screen.height;\n      var _height = imgRef.current.getBoundingClientRect().height;\n      var _width = imgRef.current.getBoundingClientRect().width;\n      console.log(xPct, yPct);\n    }\n  }; //    const [curXPos, setCurXPos] = useState<number>(xPos);\n  //    const [curYPos, setCurYPos] = useState<number>(yPos);\n  //    const [curRot, setCurRot] = useState<number>(rot);\n  //    const [curWidth, setCurWidth] = useState<number>(width);\n  //    const [curHeight, setCurHeight] = useState<number>(height);\n\n\n  var fragmentStyle = {\n    position: \"absolute\",\n    left: valueRef.current.curXPos,\n    top: valueRef.current.curYPos\n  };\n  var outerDivStyle = {\n    position: \"relative\",\n    width: valueRef.current.curWidth,\n    height: valueRef.current.curHeight,\n    cursor: \"grab\"\n  };\n  var innerDivStyle = {\n    border: \"2px black solid\",\n    position: \"absolute\",\n    zIndex: \"2\",\n    width: \"100%\",\n    height: \"100%\"\n  };\n  var resizerStylesBase = {\n    position: \"absolute\",\n    width: \"10px\",\n    height: \"10px\",\n    background: \"black\",\n    zIndex: \"2\"\n  };\n\n  var resizeNE = _objectSpread(_objectSpread({}, resizerStylesBase), {}, {\n    top: \"-1px\",\n    right: \"-1px\",\n    cursor: \"ne-resize\"\n  });\n\n  var resizeNW = _objectSpread(_objectSpread({}, resizerStylesBase), {}, {\n    top: \"-1px\",\n    left: \"-1px\",\n    cursor: \"nw-resize\"\n  });\n\n  var resizeSE = _objectSpread(_objectSpread({}, resizerStylesBase), {}, {\n    bottom: \"-1px\",\n    right: \"-1px\",\n    cursor: \"se-resize\"\n  });\n\n  var resizeSW = _objectSpread(_objectSpread({}, resizerStylesBase), {}, {\n    bottom: \"-1px\",\n    left: \"-1px\",\n    cursor: \"sw-resize\"\n  });\n\n  var _useState = useState(false),\n      isResizing = _useState[0],\n      setIsResizing = _useState[1];\n\n  var prevX, prevY;\n\n  var swOnMouseDown = function swOnMouseDown(e) {\n    setIsResizing(true);\n    prevX = e.clientX;\n    prevY = e.clientY;\n    window.addEventListener(\"mousemove\", swOnMouseMove);\n    window.addEventListener(\"mouseup\", swOnMouseUp);\n  };\n\n  var swOnMouseMove = function swOnMouseMove(e) {\n    if (imgRef !== null) {\n      var rect = imgRef.current.getBoundingClientRect();\n      imgRef.current.style.width = rect.width - (prevX - e.clientX) + \"px\";\n      imgRef.current.style.height = rect.height - (prevY - e.clientY) + \"px\";\n      imgRef.current.style.left = rect.left + (prevX - e.clientX) + \"px\";\n      valueRef.current.curWidth = rect.width - (prevX - e.clientX);\n      valueRef.current.curHeight = rect.height - (prevY - e.clientY);\n      prevX = e.clientX;\n      prevY = e.clientY;\n    }\n  };\n\n  var swOnMouseUp = function swOnMouseUp(e) {\n    window.removeEventListener(\"mousemove\", swOnMouseMove);\n    window.removeEventListener(\"mouseup\", swOnMouseUp);\n    setIsResizing(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    style: fragmentStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: valueRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, _this), console.log(valueRef.current.curXPos, valueRef.current.curYPos), !isResizing ? /*#__PURE__*/_jsxDEV(Draggable, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: outerDivStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: innerDivStyle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: url,\n          ref: imgRef,\n          style: {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resizer\",\n          style: resizeSW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resizer\",\n          style: resizeSE,\n          onMouseDown: swOnMouseDown\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resizer\",\n          style: resizeNE\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resizer\",\n          style: resizeNW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: outerDivStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: innerDivStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }, _this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: url,\n        ref: imgRef,\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer\",\n        style: resizeSW\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer\",\n        style: resizeSE,\n        onMouseDown: swOnMouseDown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer\",\n        style: resizeNE\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer\",\n        style: resizeNW\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Image, \"V1Q7d6BvcMk4f2F8JnjIZFCIQdM=\");\n\n_c = Image;\nexport default Image;\n\nvar _c;\n\n$RefreshReg$(_c, \"Image\");","map":{"version":3,"sources":["/Users/sahilkamboj/Desktop/Coding/Github/Web_Dev/mycollage2/frontend/pages/components/Image.tsx"],"names":["useState","useRef","Fragment","Draggable","Image","uuid","url","xPos","yPos","rot","width","height","imgRef","undefined","valueRef","current","curXPos","curYPos","curRot","curWidth","curHeight","getData","console","log","getBoundingClientRect","screen","xPct","left","yPct","top","fragmentStyle","position","outerDivStyle","cursor","innerDivStyle","border","zIndex","resizerStylesBase","background","resizeNE","right","resizeNW","resizeSE","bottom","resizeSW","isResizing","setIsResizing","prevX","prevY","swOnMouseDown","e","clientX","clientY","window","addEventListener","swOnMouseMove","swOnMouseUp","rect","style","removeEventListener"],"mappings":"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","sourcesContent":["import {useState, useRef} from \"react\";\nimport {MutableRefObject, Fragment} from \"react\";\nimport classnames from \"classnames\";\nimport Draggable from \"react-draggable\";\n\nimport {ImageInterface} from \"../interfaces/ImageInterface\";\n\nimport {sleep} from \"../util/logic\";\n\nimport \"../../styles/Image.module.scss\";\n\nconst Image: React.FC<ImageInterface> = ({\n    uuid,\n    url,\n    xPos,\n    yPos,\n    rot,\n    width,\n    height,\n}) =>\n{\n    const imgRef = useRef<HTMLDivElement>(undefined);\n    const valueRef = useRef({});\n    if (valueRef !== undefined) {\n        valueRef.current.curXPos = xPos;\n        valueRef.current.curYPos = yPos;\n        valueRef.current.curRot = rot;\n        valueRef.current.curWidth = width;\n        valueRef.current.curHeight = height;\n    }\n\n    const getData = (imgRef: MutableRefObject<undefined>) =>\n    {\n        if (imgRef.current !== undefined) {\n            console.log(imgRef.current.getBoundingClientRect());\n            console.log(screen.width, screen.height);\n            const xPct =\n                (100 * imgRef.current.getBoundingClientRect().left) / screen.width;\n            const yPct =\n                (100 * imgRef.current.getBoundingClientRect().top) / screen.height;\n            const height = imgRef.current.getBoundingClientRect().height;\n            const width = imgRef.current.getBoundingClientRect().width;\n            console.log(xPct, yPct);\n        }\n    };\n\n    //    const [curXPos, setCurXPos] = useState<number>(xPos);\n    //    const [curYPos, setCurYPos] = useState<number>(yPos);\n    //    const [curRot, setCurRot] = useState<number>(rot);\n    //    const [curWidth, setCurWidth] = useState<number>(width);\n    //    const [curHeight, setCurHeight] = useState<number>(height);\n\n    const fragmentStyle = {\n        position: \"absolute\",\n        left: valueRef.current.curXPos,\n        top: valueRef.current.curYPos,\n    };\n    const outerDivStyle = {\n        position: \"relative\",\n        width: valueRef.current.curWidth,\n        height: valueRef.current.curHeight,\n        cursor: \"grab\"\n    };\n\n    const innerDivStyle = {\n        border: \"2px black solid\",\n        position: \"absolute\",\n        zIndex: \"2\",\n        width: \"100%\",\n        height: \"100%\"\n    };\n\n    const resizerStylesBase = {\n        position: \"absolute\",\n        width: \"10px\",\n        height: \"10px\",\n        background: \"black\",\n        zIndex: \"2\",\n    };\n\n    const resizeNE = {\n        ...resizerStylesBase,\n        top: \"-1px\",\n        right: \"-1px\",\n        cursor: \"ne-resize\",\n    };\n    const resizeNW = {\n        ...resizerStylesBase,\n        top: \"-1px\",\n        left: \"-1px\",\n        cursor: \"nw-resize\",\n    };\n    const resizeSE = {\n        ...resizerStylesBase,\n        bottom: \"-1px\",\n        right: \"-1px\",\n        cursor: \"se-resize\",\n    };\n    const resizeSW = {\n        ...resizerStylesBase,\n        bottom: \"-1px\",\n        left: \"-1px\",\n        cursor: \"sw-resize\",\n    };\n\n    const [isResizing, setIsResizing] = useState<boolean>(false);\n    let prevX: number, prevY: number;\n\n    const swOnMouseDown = (e) =>\n    {\n        setIsResizing(true);\n        prevX = e.clientX;\n        prevY = e.clientY;\n\n\n        window.addEventListener(\"mousemove\", swOnMouseMove);\n        window.addEventListener(\"mouseup\", swOnMouseUp);\n    };\n\n    const swOnMouseMove = (e) =>\n    {\n        if (imgRef !== null) {\n            const rect = imgRef.current.getBoundingClientRect();\n            imgRef.current.style.width = rect.width - (prevX - e.clientX) + \"px\";\n            imgRef.current.style.height = rect.height - (prevY - e.clientY) + \"px\";\n            imgRef.current.style.left = rect.left + (prevX - e.clientX) + \"px\";\n\n            valueRef.current.curWidth = rect.width - (prevX - e.clientX);\n            valueRef.current.curHeight = rect.height - (prevY - e.clientY);\n\n            prevX = e.clientX;\n            prevY = e.clientY;\n        }\n    };\n\n    const swOnMouseUp = (e) =>\n    {\n        window.removeEventListener(\"mousemove\", swOnMouseMove);\n        window.removeEventListener(\"mouseup\", swOnMouseUp);\n        setIsResizing(false);\n    };\n\n\n    return (\n        <Fragment style={fragmentStyle}>\n            <div ref={valueRef} />\n            {console.log(valueRef.current.curXPos, valueRef.current.curYPos)}\n            {!isResizing ? (\n                <Draggable>\n                    <div style={outerDivStyle}>\n                        <div style={innerDivStyle}></div>\n                        <img src={url} ref={imgRef} style={{width: \"100%\", height: \"100%\"}} />\n                        <div className=\"resizer\" style={resizeSW}></div>\n                        <div className=\"resizer\" style={resizeSE} onMouseDown={swOnMouseDown}></div>\n                        <div className=\"resizer\" style={resizeNE}></div>\n                        <div className=\"resizer\" style={resizeNW}></div>\n                    </div>\n                </Draggable>\n            ) :\n                (\n                    <div style={outerDivStyle}>\n                        <div style={innerDivStyle}></div>\n                        <img src={url} ref={imgRef} style={{width: \"100%\", height: \"100%\"}} />\n                        <div className=\"resizer\" style={resizeSW}></div>\n                        <div className=\"resizer\" style={resizeSE} onMouseDown={swOnMouseDown}></div>\n                        <div className=\"resizer\" style={resizeNE}></div>\n                        <div className=\"resizer\" style={resizeNW}></div>\n                    </div>\n                )}\n        </Fragment>\n    );\n};\n\nexport default Image;\n"]},"metadata":{},"sourceType":"module"}